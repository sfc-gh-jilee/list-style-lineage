/* ===========================================
   Lineage List - Funnel UI Prototype
   All styles in a single file
   =========================================== */

/* Base Reset */
* {
  box-sizing: border-box;
}

html {
  margin: 0;
  padding: 0;
}

body {
  margin: 0;
  padding: 0;
  height: 100vh;
  font-family: "Inter", sans-serif;
  font-size: 12px;
  line-height: 16px;
  color: #1f2937;
  background: #ffffff;
}

/* Main layout with side panel */
.main-layout {
  display: flex;
  overflow: hidden;
  height: 100vh;
}

.view-panel {
  display: flex;
  flex-direction: column;
  flex: 1;
  position: relative;
}

/* Graph mode - view panel needs to handle absolute toolbar */
.view-panel.graph-mode {
  position: relative;
}

.lineage-scroll {
  position: relative;
  overflow: scroll;
  flex: 1;
  container-type: inline-size;
  container-name: lineage-list;
}

.tool-bar {
  height: 64px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 16px;
  border-bottom: 1px solid #e2e8f0;
  flex-shrink: 0;
  position: relative;
  background: #ffffff;
  z-index: 50;
}

/* Graph mode - toolbar overlay */
.view-panel.graph-mode .tool-bar {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  background: transparent;
  border-bottom: none;
}

/* Graph view container */
.lineage-graph {
  display: none;
  flex: 1;
  height: 100%;
  min-height: 0;
  background-color: #fefefe;
  background-image: radial-gradient(circle, #d5dae49a 1px, transparent 1px);
  background-size: 20px 20px;
}

.toolbar-left,
.toolbar-right {
  display: flex;
  align-items: center;
  gap: 8px;
}

.view-toggle {
  display: flex;
  border-radius: 6px;
  background: #F7F7F7;
  padding: 2px;
}

.toggle-btn {
  padding: 6px 12px;
  border: none;
  background: transparent;
  border-radius: 6px;
  font-size: 13px;
  font-weight: 500;
  color: #64748b;
  cursor: pointer;
  transition: all 0.15s;
}

.toggle-btn:hover {
  color: #1e293b;
}

.toggle-btn.active {
  border-radius: 6px;
  border: 1px solid #BDC4D5;
  background: #FBFBFB;
  color: #1e293b;
}

.toolbar-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  border-radius: 6px;
  border: 1px solid #BDC4D5;
  background: #FBFBFB;
  font-size: 13px;
  font-weight: 500;
  color: #475569;
  cursor: pointer;
  transition: all 0.15s;
}

.toolbar-btn:hover {
  background: #f1f5f9;
  border-color: #a8b2c4;
}

.toolbar-btn.icon-only {
  padding: 6px 8px;
}

.toolbar-btn svg {
  flex-shrink: 0;
}

.toolbar-btn.dropdown {
  padding-right: 8px;
}

.status-dot {
  width: 8px;
  height: 8px;
  background: #22c55e;
  border-radius: 50%;
}

/* ===========================================
   Side Panel
   =========================================== */
.side-panel {
  width: 320px;
  height: 100vh;
  background: #ffffff;
  border-left: 1px solid #D5DAE4;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  transition: transform 0.2s ease, opacity 0.2s ease;
}

@media (min-width: 1112px) {
  .side-panel {
    width: 400px;
  }
}

.side-panel.hidden {
  display: none;
}

/* Panel Views */
.panel-view {
  display: flex;
  flex-direction: column;
  height: 100%;
  overflow: hidden;
}

.panel-view.hidden {
  display: none;
}

/* Panel Header */
.panel-header {
  display: flex;
  /* align-items: center; */
  gap: 8px;
  padding: 20px;
  /* border-bottom: 1px solid #D5DAE4; */
  min-height: 48px;
}

.panel-header-main {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.panel-header-path {
  display: flex;
  align-items: center;
  height: 24px;
  gap: 4px;
  color: #5D6A85;
  font-family: var(--font-family-body, Inter);
  font-size: var(--font-size-small, 12px);
  font-weight: var(--font-weight-regular, 400);
  line-height: 16px;
}

.panel-header-path.hidden {
  display: none;
}

.panel-header-path-icon {
  width: 16px;
  height: 16px;
  flex-shrink: 0;
  opacity: 0.8;
}

.panel-header-path-separator {
  color: #94A3B8;
  margin: 0 2px;
}

.panel-header-path-text {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.panel-header-title-row {
  display: flex;
  align-items: flex-start;
  gap: 8px;
}

.panel-header-icon {
  width: 16px;
  height: 24px;
  flex-shrink: 0;
}

.panel-header-title {
  color: #000;
  font-family: var(--font-family-heading, Inter);
  font-size: var(--font-size-large, 16px);
  font-style: normal;
  font-weight: var(--font-weight-semi-bold, 600);
  line-height: var(--font-line-height-sub-header, 20px);
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  /* white-space: nowrap; */
}

.panel-edge-title {
  color: #000;
  font-family: var(--font-family-heading, Inter);
  font-size: var(--font-size-large, 16px);
  font-style: normal;
  font-weight: var(--font-weight-semi-bold, 600);
  line-height: var(--font-line-height-sub-header, 20px);
  /* Override truncation from panel-header-title */
  overflow: visible;
  text-overflow: clip;
  white-space: normal;
  word-break: break-word;
}

.panel-title-arrow {
  width: 16px;
  height: 16px;
  vertical-align: middle;
  margin: 0 2px;
  flex-shrink: 0;
}

.panel-header-actions {
  display: flex;
  /* align-items: center; */
  gap: 4px;
  flex-shrink: 0;
}

.panel-header-btn,
.panel-close {
  width: 24px;
  height: 24px;
  cursor: pointer;
  color: #5D6A85;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 4px;
  border: none;
  background: transparent;
  padding: 0;
  transition: background-color 0.15s, color 0.15s;
}

.panel-header-btn:hover,
.panel-close:hover {
  background-color: #F1F5F9;
  color: #1E252F;
}

.panel-header-btn svg,
.panel-close svg {
  flex-shrink: 0;
}

/* Panel Tabs (matching graph-expanded-tabs style) */
.panel-tabs {
  display: flex;
  gap: 16px;
  padding: 0;
  margin: 0 20px;
  border-bottom: 1px solid #D5DAE4;
  flex-shrink: 0;
}

.panel-tab {
  padding: 8px 0;
  border: none;
  background: transparent;
  color: #5D6A85;
  font-family: Inter, sans-serif;
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
  border-bottom: 2px solid transparent;
  margin-bottom: -1px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  min-width: 0;
}

.panel-tab:hover {
  color: #3D4758;
  background: transparent;
}

.panel-tab.active {
  color: #1A6CE7;
  border-bottom-color: #1A6CE7;
  font-weight: 600;
}

.panel-tab.active:hover {
  background: transparent;
}

.panel-tab.hidden {
  display: none;
}

/* Panel Tab Content */
.panel-tab-content {
  display: none;
  flex: 1;
  flex-direction: column;
  overflow-y: auto;
  padding: 20px;
}

.panel-tab-content.active {
  display: flex;
}

/* Panel Subtabs (for Features | Outputs within a tab) */
.panel-subtabs {
  display: flex;
  gap: 16px;
  padding: 0;
  margin: 0 0 12px 0;
  border-bottom: 1px solid #E8ECF1;
}

.panel-subtab-content {
  display: none;
  flex: 1;
  flex-direction: column;
}

.panel-subtab-content.active {
  display: flex;
}

/* Panel Activity Section (for Edge panel Activity tab) */
.panel-activity-section {
  margin-bottom: 16px;
}

.panel-actipanel-tabsvity-section:last-child {
  margin-bottom: 0;
}

.panel-activity-header {
  font-size: 12px;
  font-weight: 500;
  color: #5D6A85;
  margin-bottom: 8px;
  /* text-transform: uppercase;
  letter-spacing: 0.3px; */
}

.panel-activity-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

/* Panel Tree (for column lineage upstream/downstream) */
.panel-tree-group {
  margin-bottom: 0;
}

.panel-tree-group .group-header {
  padding: 0 8px;
  margin: 0 -4px;
  border-radius: 4px;
}

.panel-tree-group .group-name-separator {
  color: #94A3B8;
  margin: 0 2px;
  font-size: 12px;
}

.panel-tree-group .group-list {
  padding-left: 16px;
  overflow: visible;
}

.panel-tree-group .group-list::before {
  left: 11px;
  top: 0;
  bottom: 0;
}

.panel-tree-group .group-list li {
  padding: 0 8px;
  cursor: pointer;
}

.panel-tree-item {
  --leaf-pattern-color: #D5DAE4;
}

.panel-tree-item.selected {
  --leaf-pattern-color: #1A6CE7;
  outline: 2px solid #1A6CE7;
  outline-offset: -2px;
}

.panel-tree-item.focused {
  border: 1px solid #5999F8;
}

/* Current column node (root of the tree) */
.panel-tree-current {
  margin-bottom: 0;
}

.panel-tree-current-header {
  cursor: default;
}

.panel-tree-current-header:hover {
  background: transparent;
}

.group-list li.panel-tree-item-current {
  background: #D6E6FF;
  cursor: default;
}

.group-list li.panel-tree-item-current:hover {
  background: #EBF3FE;
}

.panel-tree-item-current .object-name {
  color: #085BD7;
  /* font-weight: 600; */
}

/* Depth level container - indentation based on depth */
.panel-tree-depth {
  margin-bottom: 0;
}

.panel-tree-depth[data-depth="0"] { padding-left: 0; }
.panel-tree-depth[data-depth="1"] { padding-left: 20px; }
.panel-tree-depth[data-depth="2"] { padding-left: 40px; }
.panel-tree-depth[data-depth="3"] { padding-left: 60px; }
.panel-tree-depth[data-depth="4"] { padding-left: 80px; }
.panel-tree-depth[data-depth="5"] { padding-left: 100px; }
.panel-tree-depth[data-depth="6"] { padding-left: 120px; }
.panel-tree-depth[data-depth="7"] { padding-left: 140px; }

/* Empty state for no related columns */
.panel-tree-empty {
  font-size: 12px;
  color: #5D6A85;
  text-align: center;
  padding: 12px;
  margin-top: 8px;
}

/* Dark mode */
.dark-mode .panel-tree-item-current {
  background: #1E3A5F;
}

.dark-mode .panel-tree-item-current .object-name {
  color: #60A5FA;
}

.dark-mode .panel-tree-connector {
  background: #334155;
}

.dark-mode .panel-tree-empty {
  color: #94A3B8;
}

/* Panel Content */
.panel-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow-y: auto;
  overflow-x: hidden;
  min-height: 0;
}

/* Section Groups */
.panel-section-group {
  position: relative;
}

/* Separator line handled by header border-bottom */

.panel-section-group:last-child {
  border-bottom: none;
}

.panel-section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  cursor: default;
  background: #fff;
  box-sizing: border-box;
  /* Border for sticky stack separation */
  border-top: 1px solid #D5DAE4;
}

/* Header is clickable to scroll section to top */
.panel-section-header {
  cursor: pointer;
}

.panel-section-header:hover {
  background-color: #F8FAFC;
}

.panel-section-title {
  font-size: 12px;
  font-weight: 600;
  color: #1E252F;
}

#panelColumnDetailsSection .panel-section-header, 
#panelEdgeDetailsSection .panel-section-header, 
#panelDetailsSection .panel-section-header {
  border-top: 1px solid transparent;
}

.panel-section-chevron-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  padding: 0;
  border: none;
  background: transparent;
  border-radius: 4px;
  cursor: pointer;
  flex-shrink: 0;
}

.panel-section-chevron-btn:hover {
  background-color: #E2E8F0;
}

/* Hide chevron button when header is sticky at top */
.panel-section-header.is-sticky-top .panel-section-chevron-btn {
  display: none;
}

.panel-section-info {
  color: #5D6A85;
  flex-shrink: 0;
}

/* Collapsible sections */
.panel-collapsible[data-collapsed="true"] .panel-section-content {
  display: none;
}

.panel-section-content {
  padding: 8px 20px 24px;
}

/* Details Grid */
.panel-details-grid {
  padding: 0;
}

.panel-detail-row {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  padding: 0;
  margin: 0 0 16px;
  gap: 2px;
  flex-direction: column;
}

.panel-detail-row:last-child {
  margin: 0 !important;
}

.panel-detail-label {
  font-size: 12px;
  color: #5D6A85;
  flex-shrink: 0;
}

.panel-detail-value {
  font-size: 14px;
  line-height: 20px;;
  color: #1E252F;
  /* text-align: right; */
  overflow: hidden;
  text-overflow: ellipsis;
  /* white-space: nowrap; */
}

.panel-detail-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  padding: 4px 0;
  /* justify-content: flex-end; */
}

/* External Tool in Edge Panel */
.panel-external-tool {
  display: inline-flex;
  align-items: center;
  gap: 6px;
}

.panel-external-tool-icon {
  width: 16px;
  height: 16px;
  flex-shrink: 0;
}

/* Tags */
.panel-tag {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 2px 8px;
  border-radius: var(--Large, 16px);
  border: 1px solid var(--Reusable-Border, #D5DAE4);
  background: var(--Primitives-Level-2-background, #FBFBFB);
  font-size: 12px;
  color: #1E252F;
  box-sizing: border-box;
}

.panel-tag-icon {
  width: 14px;
  height: 14px;
  color: #8B95A9;
  flex-shrink: 0;
}

.panel-tag-name {
  color: #8B95A9;
  font-size: 11px;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.02em;
}

.panel-tag-divider {
  width: 1px;
  height: 14px;
  background: #D5DAE4;
}

.panel-tag-value {
  color: #1E252F;
  font-size: 12px;
  font-weight: 500;
}

/* Column Panel */
.panel-column-view {
  display: flex;
  flex-direction: column;
  height: 100%;
}

.panel-column-view .panel-header-icon-wrapper {
  display: flex;
  /* align-items: center; */
  justify-content: center;
  /* width: 24px;
  height: 24px;
  background: #F1F5F9;
  border-radius: 4px; */
}

.panel-detail-description {
  white-space: normal;
  text-align: right;
  line-height: 1.4;
}

.panel-section-count {
  font-size: 11px;
  font-weight: 500;
  color: #8B95A9;
  background: #F1F5F9;
  padding: 2px 6px;
  border-radius: 10px;
  margin-left: auto;
  margin-right: 8px;
}

.panel-lineage-list {
  display: flex;
  flex-direction: column;
  /* gap: 8px; */
}

.panel-procedures-list,
.panel-tasks-list {
  gap: 8px;
}

.panel-lineage-item,
.panel-procedure-item,
.panel-task-item {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  padding: 16px;
  background: #fff;
  border-radius: 8px;
  border: 1px solid #D5DAE4;
  gap: 8px;
  position: relative;
  overflow: hidden;
  --leaf-pattern-color: #D5DAE4;
}

.panel-lineage-item-clickable {
  cursor: pointer;
  transition: background-color 0.15s ease, border-color 0.15s ease;
}

.panel-lineage-item-clickable:hover {
  border-color: #9FABC1;
}

/* Leaf indicator strips for panel lineage items */
.panel-lineage-item.leaf-upstream::before,
.panel-lineage-item.leaf-downstream::after {
  content: '';
  position: absolute;
  top: 0;
  bottom: 0;
  width: 4px;
  background: repeating-linear-gradient(
    -55deg,
    transparent,
    transparent 2px,
    var(--leaf-pattern-color) 2px,
    var(--leaf-pattern-color) 3px
  );
  pointer-events: none;
}

/* Left strip for upstream leaf (no sources feeding into this column) */
.panel-lineage-item.leaf-upstream::before {
  left: 0;
  border-radius: 8px 0 0 8px;
}

/* Right strip for downstream leaf (no destinations from this column) */
.panel-lineage-item.leaf-downstream::after {
  right: 0;
  border-radius: 0 8px 8px 0;
}

.panel-lineage-column-header {
  display: flex;
  flex-direction: column;
  min-width: 0;
  flex: 1;
  gap: 2px;
  position: relative;
}

.panel-lineage-goto {
  position: absolute;
  top: 0;
  right: 0;
  opacity: 0;
  transition: opacity 0.15s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 2px;
  border-radius: 4px;
}

.panel-lineage-goto:hover {
  background: rgba(0, 0, 0, 0.05);
}

.panel-lineage-item:hover .panel-lineage-goto {
  opacity: 1;
}

.panel-lineage-type-icon {
  width: 16px;
  height: 16px;
  flex-shrink: 0;
}

.panel-lineage-column-info {
  display: flex;
  flex-direction: row;
  gap: 8px;
  min-width: 0;
  flex: 1;
  align-items: center;
}

.panel-lineage-column-name {
  font-size: 14px;
  line-height: 20px;
  font-weight: 500;
  color: #1E252F;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  display: flex;
  align-items: center;
  gap: 4px;
}

.panel-lineage-item-name {
  color: var(--Reusable-Secondary-text, #5D6A85);
  font-size: 12px;
  font-style: normal;
  font-weight: 400;
  line-height: normal;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  line-height: 18px;
}

.panel-lineage-item-meta {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  color: var(--Reusable-Secondary-text, #5D6A85);
  font-family: Inter;
  font-size: 12px;
  font-style: normal;
  font-weight: 400;
  line-height: normal;
  margin-top: 4px;
}

.panel-lineage-column-info .panel-lineage-transform,
.panel-lineage-column-info .panel-task-status {
  align-self: flex-start;
  margin-top: 4px;
}

.panel-lineage-transform {
  color: var(--Reusable-Primary-text, #1E252F);
  font-family: "Apercu Mono Pro", monospace;
  font-size: 11px;
  font-style: normal;
  font-weight: 400;
  line-height: 11px;
  border-radius: var(--XSmall, 4px);
  border: 1px solid var(--Reusable-Border, #D5DAE4);
  background: var(--Status-Neutral-Background, #ECEEF1);
  padding: 2px 6px;
  text-transform: uppercase;
  flex-shrink: 0;
}

/* Columns Section */
.panel-columns-section {
  display: flex;
  flex-direction: column;
  flex: 1;
  min-height: 0;
}

.panel-columns-section .panel-section-header {
  flex-shrink: 0;
}

.panel-search {
  padding: 0 0 16px;
  flex-shrink: 0;
}

.panel-search input {
  width: 100%;
  padding: 6px 10px;
  border: 1px solid #D5DAE4;
  border-radius: 4px;
  font-size: 12px;
  background: #F8FAFC;
  color: #1E252F;
}

.panel-search input::placeholder {
  color: #94A3B8;
}

.panel-search input:focus {
  outline: none;
  border-color: #0EA5E9;
  background: #FFF;
}

.panel-column-list {
  display: flex;
  flex-direction: column;
  flex: 1;
  min-height: 0;
  overflow-y: auto;
  padding: 0 0 16px;
}

.panel-column-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 4px 8px;
  font-size: 12px;
  color: #1E252F;
  border-radius: 4px;
  transition: background-color 0.1s;
}

.panel-column-item-clickable {
  cursor: pointer;
}

.panel-column-item:hover {
  background-color: #F1F5F9;
}

.panel-column-icon {
  width: 14px;
  height: 14px;
  flex-shrink: 0;
  opacity: 0.7;
}

.panel-column-name {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.panel-column-key {
  width: 14px;
  height: 14px;
  flex-shrink: 0;
}

.panel-column-importance {
  margin-left: auto;
  font-size: 11px;
  color: #64748B;
  font-weight: 500;
  flex-shrink: 0;
}

.panel-column-empty {
  color: #94a3b8;
  font-size: 12px;
  padding: 8px;
}

/* SQL Query Code Block */
.panel-sql-code {
  background: #F7F7F7;
  color: #1E252F;
  padding: 16px;
  border-radius: 8px;
  font-family: 'SF Mono', 'Monaco', 'Consolas', monospace;
  font-size: 12px;
  line-height: 18px;
  overflow-x: auto;
  white-space: pre-wrap;
  word-break: break-all;
  margin: 0;
  max-height: 640px;
  overflow-y: auto;
}

/* SQL Syntax Highlighting - Light Mode */
.panel-sql-code .sql-keyword {
  color: #0550AE;
  font-weight: 500;
}

.panel-sql-code .sql-function {
  color: #8250DF;
}

.panel-sql-code .sql-string {
  color: #0A3069;
}

.panel-sql-code .sql-number {
  color: #0550AE;
}

.panel-sql-code .sql-comment {
  color: #6E7781;
  font-style: italic;
}

.panel-sql-code .sql-operator {
  color: #CF222E;
}

.panel-sql-code .sql-identifier {
  color: #953800;
}

/* Dark Mode Styles (class-based for manual theme control) */
.dark-mode .panel-sql-code {
  background: #0F161E;
  color: #E6EDF3;
}

.dark-mode .panel-sql-code .sql-keyword {
  color: #FF7B72;
  font-weight: 500;
}

.dark-mode .panel-sql-code .sql-function {
  color: #D2A8FF;
}

.dark-mode .panel-sql-code .sql-string {
  color: #A5D6FF;
}

.dark-mode .panel-sql-code .sql-number {
  color: #79C0FF;
}

.dark-mode .panel-sql-code .sql-comment {
  color: #8B949E;
  font-style: italic;
}

.dark-mode .panel-sql-code .sql-operator {
  color: #FF7B72;
}

.dark-mode .panel-sql-code .sql-identifier {
  color: #FFA657;
}

/* Empty State */
.panel-empty-state {
  font-size: 12px;
  color: #94A3B8;
  padding: 8px 0;
  text-align: center;
}

.panel-task-status {
  display: inline-flex;
  align-items: center;
  padding: 2px 6px;
  border-radius: var(--XSmall, 4px);
  font-family: var(--Font-Family-Body, Inter);
  font-size: var(--Font-Size-Small, 12px);
  font-style: normal;
  font-weight: var(--Font-Weight-Semibold, 500);
  line-height: var(--Line-Height-LineHeight18, 18px);
  letter-spacing: var(--Letter-Spacing, 0);
  text-transform: capitalize;
  border: none;
}

.panel-task-status.success {
  background: var(--Status-Success-Background, #BDF8E9);
  color: var(--Status-Success-Text, #034237);
}

.panel-task-status.running {
  background: var(--_Components-Status-Pill-Active-background, #5D6A85);
  color: var(--_Components-Status-Pill-Active-text, #FBFBFB);
}

.panel-task-status.scheduled {
  display: inline-flex;
  padding: var(--0_25x, 2px) var(--0_75x, 6px);
  align-items: center;
  gap: var(--0_25x, 2px);
  background: #DBEAFE;
  color: var(--Status-Info-Text, #002C6E);
  text-align: justify;
  font-family: var(--Font-Family-Body, Inter);
  font-size: var(--Font-Size-Small, 12px);
  font-style: normal;
  font-weight: var(--Font-Weight-Semibold, 500);
  line-height: var(--Line-Height-LineHeight18, 18px);
  letter-spacing: var(--Letter-Spacing, 0);
}

.panel-task-status.failed {
  background: var(--Status-Critical-Background, #FFD1DC);
  color: var(--Status-Critical-Text, #66000E);
}

/* Dark mode for proc/task items */
.dark-mode .panel-proc-item,
.dark-mode .panel-task-item {
  background: #1E293B;
  border-color: #334155;
}

.dark-mode .panel-proc-item:hover,
.dark-mode .panel-task-item:hover {
  border-color: #475569;
  background: #273449;
}

.dark-mode .panel-proc-name,
.dark-mode .panel-task-name {
  color: #F1F5F9;
}

.dark-mode .panel-proc-meta-item,
.dark-mode .panel-task-meta-item {
  color: #94A3B8;
}

.dark-mode .panel-proc-meta-label,
.dark-mode .panel-task-meta-label {
  color: #64748B;
}

.dark-mode .panel-task-status.success {
  background: #166534;
  color: #BBF7D0;
}

.dark-mode .panel-task-status.running {
  background: #1E40AF;
  color: #BFDBFE;
}

.dark-mode .panel-task-status.scheduled {
  background: #5B21B6;
  color: #DDD6FE;
}

.dark-mode .panel-task-status.failed {
  background: #991B1B;
  color: #FECACA;
}

.dark-mode .panel-header-title,
.dark-mode .panel-edge-title {
  color: #F1F5F9;
}

.dark-mode .panel-header-path {
  color: #94A3B8;
}

.dark-mode .panel-header-path-separator {
  color: #64748B;
}

.dark-mode .panel-title-arrow {
  filter: brightness(0) invert(1) brightness(0.85);
}

.dark-mode .panel-column-importance {
  color: #94A3B8;
}

.dark-mode .panel-tabs {
  border-bottom-color: #334155;
}

.dark-mode .panel-tab {
  color: #94A3B8;
}

.dark-mode .panel-tab:hover {
  color: #CBD5E1;
}

.dark-mode .panel-tab.active {
  color: #60A5FA;
  border-bottom-color: #60A5FA;
}

.dark-mode .panel-subtabs {
  border-bottom-color: #334155;
}

.dark-mode .panel-activity-header {
  color: #94A3B8;
}

/* ===========================================
   Legacy Edge Info Panel (keeping for backwards compatibility)
   =========================================== */
.panel-edge-info {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  padding: 8px 0;
}

.panel-edge-node {
  width: 100%;
  padding: 12px;
  background: #F8FAFC;
  border-radius: 8px;
  border: 1px solid #E8ECF1;
}

.panel-edge-label {
  font-size: 10px;
  font-weight: 500;
  color: #5D6A85;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  margin-bottom: 8px;
}

.panel-edge-item {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 4px;
}

.panel-edge-icon {
  width: 16px;
  height: 16px;
  flex-shrink: 0;
  object-fit: contain;
}

.panel-edge-name {
  font-size: 13px;
  font-weight: 600;
  color: #1E252F;
  text-transform: uppercase;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.panel-edge-path {
  font-size: 11px;
  color: #5D6A85;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.panel-edge-arrow {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  background: #FFF;
  border: 1px solid #E8ECF1;
  border-radius: 50%;
}

.panel-edge-arrow svg {
  width: 16px;
  height: 16px;
}

/* ===========================================
   Main Container
   =========================================== */
.lineage-table {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  padding-left: 16px;
  padding-right: 16px;
}

/* ===========================================
   Sticky Positioning (handled by JavaScript)
   =========================================== */

/* Placeholder for sticky headers */
.depth-header-placeholder {
  flex-shrink: 0;
}

/* Sticky header state (applied via JS) */
.depth-header[style*="position: fixed"] {
  border-bottom: 1px solid #e2e8f0;
  /* box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); */
}

/* Border for sticky headers */
.depth-header {
  border-bottom: 1px solid #e2e8f0;
}

/* ===========================================
   Depth Headers (Layer Bars)
   =========================================== */
.depth-header {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 0 0;
  height: 28px;
  background: #fff;
  flex-shrink: 0;
  cursor: pointer;
  /* transition: background 0.15s; */
  box-sizing: border-box;
}

.depth-header:hover {
  background: hsla(217, 13%, 94%, 1);
}

/* Row-based indentation */
/* .depth-header[data-row="1"] { padding-left: 16px; }
.depth-header[data-row="2"] { padding-left: 40px; }
.depth-header[data-row="3"] { padding-left: 64px; }
.depth-header[data-row="4"] { padding-left: 88px; }
.depth-header[data-row="5"] { padding-left: 112px; }
.depth-header[data-row="6"] { padding-left: 136px; }
.depth-header[data-row="7"] { padding-left: 160px; } */

/* Depth Badge (Number) */
.depth-badge {
  font-size: 12px;
  line-height: 16px;
  height: 16px;
  font-weight: 400;
  /* font-family: "SF Mono", "Consolas", monospace; */
  /* padding: 0 6px;
  border-radius: 4px; */
  /* min-width: 32px; */
  text-align: center;
  flex-shrink: 0;
}

.depth-badge--upstream {
  /* background: #dbeafe; */
  /* color: #1d4ed8; */
  /* background: #e2e8f0; */
  color: hsla(221, 18%, 44%, 1);
}

.depth-badge--downstream {
  /* background: #f5d0fe; */
  /* color: #a21caf; */
  /* background: #e2e8f0; */
  color: hsla(221, 18%, 44%, 1);
}

.depth-badge--focal {
  /* background: #3b82f6; */
  /* color: #ffffff; */
  /* background: hsla(216, 93%, 44%, 1); */
  color: hsla(216, 93%, 44%, 1);
}

/* Focal Header */
.depth-header--focal {
  /* background: hsla(217, 100%, 92%, 1); */
  border-top-color: #e2e8f0;
}

.depth-header--focal:hover {
  background: hsla(217, 13%, 94%, 1);
}

/* ===========================================
   Depth Content Container
   =========================================== */
.depth-content {
  background: #ffffff;
  margin-bottom: 8px;
}

.depth-content--focal {
  background: #ffffff;
}

/* Row-based indentation */
.depth-content[data-row="1"] { padding-left: 0px; }
.depth-content[data-row="2"] { padding-left: 20px; }
.depth-content[data-row="3"] { padding-left: 40px; }
.depth-content[data-row="4"] { padding-left: 60px; }
.depth-content[data-row="5"] { padding-left: 80px; }
.depth-content[data-row="6"] { padding-left: 100px; }
.depth-content[data-row="7"] { padding-left: 120px; }

/* ===========================================
   Collapsible Object Groups
   =========================================== */
.object-group {
  /* border-top: 1px solid #e2e8f0; */
  position: relative;
}

.depth-content--focal .object-group {
  border-top-color: #334155;
}

/* Group Header */
.group-header {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 0 12px;
  height: 30px;
  cursor: pointer;
  /* transition: background 0.15s; */
  user-select: none;
}

.group-header:hover {
  background: hsla(217, 13%, 94%, 1);
}

/* .group-header--focal - no special styling needed */

.group-header--focal:hover {
  background: hsla(217, 13%, 94%, 1);
}

/* Chevron Toggle */
.chevron {
  width: 16px;
  height: 16px;
  flex-shrink: 0;
  transition: transform 0.2s;
  object-fit: contain;
  filter: invert(43%) sepia(12%) saturate(749%) hue-rotate(186deg) brightness(93%) contrast(89%);
}

.object-group.collapsed .chevron {
  transform: rotate(-90deg);
}

.object-group:not(.collapsed) .chevron {
  transform: rotate(0deg);
}

/* Upstream tree group: chevron up when expanded, left when collapsed */
.object-group.upstream-tree-group:not(.collapsed) .chevron {
  transform: rotate(180deg);
}

.object-group.upstream-tree-group.collapsed .chevron {
  transform: rotate(90deg);
}

/* Group Icon */
.group-icon {
  width: 16px;
  height: 16px;
  flex-shrink: 0;
  object-fit: contain;
}

/* Non-logo icons use gray color */
img.group-icon:not([src*="logo-"]) {
  filter: invert(43%) sepia(12%) saturate(749%) hue-rotate(186deg) brightness(93%) contrast(89%);
}

/* Group Name */
.group-name {
  font-size: 12px;
  line-height: 16px;
  font-weight: 400;
  color: hsla(221, 18%, 44%, 1);
}

.group-header--focal .group-name {
  color: hsla(221, 18%, 44%, 1);
}

/* Group Count Badge */
.group-count {
  font-size: 12px;
  line-height: 16px;
  font-weight: 500;
  color: hsla(221, 18%, 44%, 1);
  background: #eff1f4;
  padding: 0 6px;
  border-radius: 10px;
  margin-left: 8px;
  height: 16px;
}

.group-header--focal .group-count {
  background: #e2e8f0;
  color: hsla(221, 18%, 44%, 1);
}

/* ===========================================
   Group List (Items)
   =========================================== */
.group-list {
  list-style: none;
  margin: 0;
  padding: 0;
  padding-left: 20px;
  overflow: hidden;
  transition: max-height 0.3s ease-out, opacity 0.2s;
  position: relative;
}

/* Vertical line */
.group-list::before {
  content: '';
  position: absolute;
  left: 19px;
  top: 0;
  bottom: 0;
  width: 1px;
  background: #e2e8f0;
}

.object-group.collapsed .group-list {
  max-height: 0;
  opacity: 0;
}

.object-group:not(.collapsed) .group-list {
  max-height: 2000px;
  opacity: 1;
}

.group-list li {
  display: grid;
  grid-template-columns: 1fr auto;
  align-items: center;
  gap: 12px;
  padding: 0 12px;
  padding-left: 12px;
  height: 30px;
  /* border-top: 1px solid #f1f5f9; */
  background: #ffffff;
  /* transition: background 0.15s; */
  box-sizing: border-box;
  border-radius: 6px;
  position: relative;
}

/* ===========================================
   Leaf Node Indicators
   Visual indicator for nodes without upstream/downstream lineage
   =========================================== */

/* Default pattern color (inherits from element's --leaf-pattern-color or falls back) */
.group-list li {
  --leaf-pattern-color: #D5DAE4;
}

/* Override pattern color for selected state */
.group-list li.selected {
  --leaf-pattern-color: #1A6CE7;
}

/* Base styles for leaf indicator strips */
.group-list li.leaf-upstream::before,
.group-list li.leaf-downstream::after {
  content: '';
  position: absolute;
  top: 0;
  bottom: 0;
  width: 4px;
  background: repeating-linear-gradient(
    -55deg,
    transparent,
    transparent 2px,
    var(--leaf-pattern-color) 2px,
    var(--leaf-pattern-color) 3px
  );
  pointer-events: none;
}

/* Left strip for upstream leaf (no sources feeding into this node) */
.group-list li.leaf-upstream::before {
  left: 0;
  border-radius: 4px 0 0 4px;
}

/* Right strip for downstream leaf (no destinations from this node) */
.group-list li.leaf-downstream::after {
  right: 0;
  border-radius: 0 4px 4px 0;
}

.group-list li:hover {
  background: hsla(217, 13%, 94%, 1);
}

/* Selected object state */
.group-list li.selected {
  outline: 2px solid #1A6CE7;
  outline-offset: -2px;
}

/* Connected object highlight (on hover) */
/* Highlight connection tags in upstream (-1) nodes */
.group-list li.highlight-upstream .connection-tag {
  color: #1A6CE7;
}
.group-list li.highlight-upstream .connections::before {
  filter: invert(35%) sepia(98%) saturate(1500%) hue-rotate(200deg) brightness(95%) contrast(95%);
}

/* Highlight object name in downstream (+1) nodes */
.group-list li.highlight-downstream .object-name {
  color: #1A6CE7;
}

/* Highlight connection tags in the hovered row */
.group-list li.highlight-current .connection-tag {
  color: #1A6CE7;
}
.group-list li.highlight-current .connections::before {
  filter: invert(35%) sepia(98%) saturate(1500%) hue-rotate(200deg) brightness(95%) contrast(95%);
}

/* Focal List */
.depth-content--focal .group-list::before {
  background: #e2e8f0;
}

/* Selected object highlight (neutralized) */
.depth-content--focal .group-list li {
  /* background: #eff6ff; */
  /* border-top-color: #dbeafe; */
  background: hsla(217, 100%, 92%, 1);
  border-top-color: #e2e8f0;
}

.depth-content--focal .group-list li:hover {
  /* background: #dbeafe; */
  background: hsla(217, 13%, 94%, 1);
}

.depth-content--focal .object-name {
  color: #085BD7;
  /* color: hsla(215, 22%, 15%, 1); */
}

/* ===========================================
   Object Info
   =========================================== */
.object-info {
  display: flex;
  align-items: center;
  gap: 4px;
  flex-wrap: nowrap;
  flex-grow: 1;
}

.object-icon {
  width: 16px;
  height: 16px;
  flex-shrink: 0;
  object-fit: contain;
  filter: invert(43%) sepia(12%) saturate(749%) hue-rotate(186deg) brightness(93%) contrast(89%);
}

.object-name {
  font-size: 12px;
  line-height: 16px;
  font-weight: 500;
  color: #1e293b;
  text-transform: uppercase;
}

/* ===========================================
   Connections (Lineage References)
   =========================================== */
.connections {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 4px;
  margin-top: 2px;
  max-width: 288px;
  overflow: hidden;
  height: 16px;
  justify-content: end;
  flex-grow: 1;
  flex-wrap: nowrap;
  cursor: pointer;
}

.connections:hover .connection-tag {
  color: #1A6CE7;
}

.connections:hover::before {
  filter: invert(35%) sepia(98%) saturate(1500%) hue-rotate(200deg) brightness(95%) contrast(95%);
}

/* Arrow indicators */
.connections::before {
  content: '';
  width: 16px;
  height: 16px;
  flex-shrink: 0;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  filter: invert(43%) sepia(12%) saturate(749%) hue-rotate(186deg) brightness(93%) contrast(89%);
}

.connections--downstream::before {
  background-image: url('./img/arrow-right.svg');
}

.connections--upstream::before {
  background-image: url('./img/arrow-left.svg');
}

.connection-tag {
  font-size: 12px;
  line-height: 16px;
  padding: 0 6px;
  border-radius: 4px;
  /* background: #f1f5f9; */
  color: hsla(221, 18%, 44%, 1);
  /* border: 1px solid #e2e8f0; */
  text-transform: uppercase;
}

.connections--upstream .connection-tag {
  /* background: #eff6ff; */
  /* border-color: #dbeafe; */
  /* color: #1d4ed8; */
  /* background: #f1f5f9; */
  border-color: #e2e8f0;
  color: hsla(221, 18%, 44%, 1);
}

.connections--downstream .connection-tag {
  /* background: #fdf4ff; */
  /* border-color: #f5d0fe; */
  /* color: #a21caf; */
  /* background: #f1f5f9; */
  border-color: #e2e8f0;
  color: hsla(221, 18%, 44%, 1);
}

/* Schema-colored Tags (neutralized) */
.connection-tag.tag--blue {
  /* background: #dbeafe; */
  /* border-color: #bfdbfe; */
  /* color: #1e40af; */
  /* background: #f1f5f9; */
  border-color: #e2e8f0;
  color: hsla(221, 18%, 44%, 1);
}

.connection-tag.tag--green {
  /* background: #dcfce7; */
  /* border-color: #bbf7d0; */
  /* color: #166534; */
  /* background: #f1f5f9; */
  border-color: #e2e8f0;
  color: hsla(221, 18%, 44%, 1);
}

.connection-tag.tag--purple {
  /* background: #f3e8ff; */
  /* border-color: #e9d5ff; */
  /* color: #6b21a8; */
  /* background: #f1f5f9; */
  border-color: #e2e8f0;
  color: hsla(221, 18%, 44%, 1);
}

.connection-tag.tag--gray {
  /* background: #f1f5f9; */
  border-color: #e2e8f0;
  color: hsla(221, 18%, 44%, 1);
}


/* ===========================================
   Connection Overflow & Responsive Behavior
   =========================================== */

/* Overflow counter badge */
.connection-overflow {
  font-size: 12px;
  line-height: 16px;
  padding: 0 6px;
  border-radius: 4px;
  color: hsla(221, 18%, 44%, 1);
  background: transparent;
  cursor: pointer;
  flex-shrink: 0;
  font-weight: 500;
  white-space: nowrap;
}

.connection-overflow:hover {
  background: #e2e8f0;
  color: #1A6CE7;
}

/* Compact connection counter (for very narrow screens) */
.connection-compact-counter {
  display: none;
  align-items: center;
  gap: 4px;
  font-size: 12px;
  line-height: 16px;
  color: hsla(221, 18%, 44%, 1);
  cursor: pointer;
  padding: 0 6px;
  border-radius: 4px;
  flex-shrink: 0;
}

.connection-compact-counter:hover {
  background: #eff1f4;
  color: #1A6CE7;
}

.connection-compact-counter::before {
  content: '';
  width: 14px;
  height: 14px;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  filter: invert(43%) sepia(12%) saturate(749%) hue-rotate(186deg) brightness(93%) contrast(89%);
}

.connection-compact-counter:hover::before {
  filter: invert(35%) sepia(98%) saturate(1500%) hue-rotate(200deg) brightness(95%) contrast(95%);
}

.connection-compact-counter--downstream::before {
  background-image: url('./img/arrow-right.svg');
}

.connection-compact-counter--upstream::before {
  background-image: url('./img/arrow-left.svg');
}

/* ===========================================
   Connection Hover Popover
   =========================================== */
.connection-popover {
  position: fixed;
  z-index: 1000;
  background: #ffffff;
  border: 1px solid #D5DAE4;
  border-radius: 8px;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);
  padding: 12px;
  min-width: 200px;
  max-width: 320px;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.15s ease;
}

.connection-popover.visible {
  opacity: 1;
  pointer-events: auto;
}

.connection-popover-section {
  margin-bottom: 12px;
}

.connection-popover-section:last-child {
  margin-bottom: 0;
}

.connection-popover-label {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 11px;
  font-weight: 400;
  color: #64748b;
  /* text-transform: uppercase; */
  letter-spacing: 0.02em;
  margin-bottom: 8px;
  padding-bottom: 4px;
  /* border-bottom: 1px solid #e2e8f0; */
}

.connection-popover-label::before {
  content: '';
  width: 12px;
  height: 12px;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  filter: invert(43%) sepia(12%) saturate(749%) hue-rotate(186deg) brightness(93%) contrast(89%);
}

.connection-popover-label--upstream::before {
  background-image: url('./img/arrow-left.svg');
}

.connection-popover-label--downstream::before {
  background-image: url('./img/arrow-right.svg');
}

.connection-popover-list {
  list-style: none;
  margin: 0;
  padding: 0;
}

.connection-popover-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 8px;
  border-radius: 4px;
  cursor: pointer;
  transition: background-color 0.1s;
}

.connection-popover-item:hover {
  background: #f1f5f9;
}

.connection-popover-item-icon {
  width: 14px;
  height: 14px;
  flex-shrink: 0;
  object-fit: contain;
  filter: invert(43%) sepia(12%) saturate(749%) hue-rotate(186deg) brightness(93%) contrast(89%);
}

.connection-popover-item-name {
  font-size: 12px;
  font-weight: 500;
  color: #1e293b;
  text-transform: uppercase;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.connection-popover-empty {
  font-size: 12px;
  color: #94a3b8;
  padding: 4px 8px;
  font-style: italic;
}

/* ===========================================
   Responsive - Mobile & Narrow Screens
   =========================================== */

/* Hide individual tags, show compact counter below 600px */
@container lineage-list (max-width: 600px) {
  .connections .connection-tag,
  .connections .connection-overflow,
  .connections::before {
    display: none !important;
  }

  .connection-compact-counter {
    display: flex;
  }
}

/* Standard overflow behavior for wider screens */
@container lineage-list (min-width: 601px) {
  .connection-compact-counter {
    display: none;
  }
}
